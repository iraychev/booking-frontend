<div class="profile-container" [class.edit-mode]="editMode">
  <mat-tab-group [(selectedIndex)]="selectedTabIndex">
    <mat-tab label="Profile">
      <div *ngIf="!editMode">
        <div class="image-container">
          <img
            *ngIf="user.profileImage"
            [src]="getProfileImageUrl()"
            alt="Profile Image"
            id="profile-img"
          />
          <p *ngIf="!user.profileImage">No profile image available</p>
        </div>
        <div>
          <label for="username">Username:</label>
          <span>{{ user.username }}</span>
        </div>
        <div>
          <label for="firstName">First Name:</label>
          <span>{{ user.firstName }}</span>
        </div>
        <div>
          <label for="lastName">Last Name:</label>
          <span>{{ user.lastName }}</span>
        </div>
        <div>
          <label for="email">Email:</label>
          <span>{{ user.email }}</span>
        </div>
        <button (click)="toggleEditMode()">Edit</button>
      </div>
      <div *ngIf="editMode">
        <div>
          <label for="username">Username:</label>
          <input
            type="text"
            id="username"
            [(ngModel)]="user.username"
            name="username"
            required
          />
        </div>
        <div>
          <label for="firstName">First Name:</label>
          <input
            type="text"
            id="firstName"
            [(ngModel)]="user.firstName"
            name="firstName"
            required
          />
        </div>
        <div>
          <label for="lastName">Last Name:</label>
          <input
            type="text"
            id="lastName"
            [(ngModel)]="user.lastName"
            name="lastName"
            required
          />
        </div>
        <div>
          <label for="email">Email:</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="user.email"
            name="email"
            required
          />
        </div>
        <div>
          <label for="newProfileImage">Profile Picture:</label>
          <input type="file" (change)="onFileSelected($event)" />
          <button (click)="onUpload()">Upload</button>
          <img [src]="user.profileImage" alt="Profile Picture">
        </div>
        <button (click)="saveChanges()">Save</button>
        <button (click)="cancelEdit()">Cancel</button>
      </div>
    </mat-tab>
    <mat-tab label="Your Listings">
      <div *ngIf="personalListings.length === 0">No listings found.</div>
      <div *ngFor="let listing of personalListings" class="listing-container">
        <div class="listing-title">
          <a [routerLink]="['/listing-details', listing.id]">{{
            listing.title
          }}</a>
        </div>
        <button class="delete-button" (click)="deleteListing(listing.id)">
          Delete
        </button>
      </div>
    </mat-tab>
    <mat-tab label="Your Bookings"> </mat-tab>
  </mat-tab-group>
  <div *ngIf="error" class="error">{{ error }}</div>
</div>
